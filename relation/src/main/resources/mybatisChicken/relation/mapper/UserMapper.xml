<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="mybatisChicken.relation.mapper.UserMapper">


    <resultMap id="userMap" type="mybatisChicken.relation.model.SysUser">
        <id property="id" column="id"/>
        <result property="userName" column="user_name"/>
        <result property="userPassword" column="user_password"/>
        <result property="userEmail" column="user_email"/>
        <result property="userInfo" column="user_info"/>
        <result property="headImg" column="head_img" jdbcType="BLOB"/>
        <result property="createTime" column="create_time" jdbcType="TIMESTAMP"/>
    </resultMap>

    <!--XML 中的select 标签的id 属性值和定义的接口方法名是一样的。MyBatis
    就是通过这种方式将接口方法和XML 中定义的SQL 语句关联到一起的，如果接口方法没有和
    XML 中的id 属性值相对应，启动程序便会报错-->
    <select id="selectBy2JavaBean" resultMap="userMap">
		select * from sys_user where id = #{param1.id} and user_name=#{param2.userName}
	</select>

    <select id="selectUserCountry" resultMap="userCountryMap">
       SELECT u.id,user_name,user_password,user_email,user_info,head_img,create_time,country_id,
      countryname,countrycode
      FROM sys_user u,country c where c.id=u.country_id and c.id=#{id}
    </select>

    <resultMap id="userCountryMap" type="mybatisChicken.relation.model.SysUser">
        <id property="id" column="id"/>
        <result property="userName" column="user_name"/>
        <result property="userPassword" column="user_password"/>
        <result property="userEmail" column="user_email"/>
        <result property="userInfo" column="user_info"/>
        <result property="headImg" column="head_img" jdbcType="BLOB"/>
        <result property="createTime" column="create_time" jdbcType="TIMESTAMP"/>
        <result property="countryId" column="country_id"  />
        <result property="country.id" column="country_id"/>
        <result property="country.countryname" column="countryname"/>
        <result property="country.countrycode" column="countrycode"/>
    </resultMap>

    <select id="selectUserCountryAssociation" resultMap="associationUserCountryMap">
       SELECT u.id,user_name,user_password,user_email,user_info,head_img,create_time,country_id,
      countryname,countrycode
      FROM sys_user u,country c where c.id=u.country_id and c.id=#{id}
    </select>

    <resultMap id="associationUserCountryMap" type="mybatisChicken.relation.model.SysUser">
        <id property="id" column="id"/>
        <result property="userName" column="user_name"/>
        <result property="userPassword" column="user_password"/>
        <result property="userEmail" column="user_email"/>
        <result property="userInfo" column="user_info"/>
        <result property="headImg" column="head_img" jdbcType="BLOB"/>
        <result property="createTime" column="create_time" jdbcType="TIMESTAMP"/>
        <result property="countryId" column="country_id"  />
        <result property="country.id" column="country_id"/>
        <association property="country"  javaType="mybatisChicken.relation.model.Country"><!--如果没有引用resultMap，javaType必须写-->
            <result property="countryname" column="countryname"/>
            <result property="countrycode" column="countrycode"/>
        </association>

    </resultMap>


</mapper>


